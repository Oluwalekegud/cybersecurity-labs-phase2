# Lab - DNS Lookup

## Objectives
- Use `nslookup` to obtain domain and IP address information.
- Use the `whois` command to find additional registration information.
- Compare the output of the `nslookup` and `dig` tools.
- Perform reverse DNS lookups.

## Background / Scenario
Before beginning any penetration test or ethical hacking engagement, it's crucial to gather as much information about the target organization as possible through passive reconnaissance. In this lab, you will investigate the output of the `nslookup`, `whois`, and `dig` commands.

## Required Resources
- Kali VM customized for Ethical Hacker course
- Internet access

## Instructions

### Part 1: Use nslookup to Obtain Domain and IP Address Information

#### Step 1: Log into Kali Linux
- Log into the Kali system with the username `kali` and the password `kali`.
- Open a terminal window.

#### Step 2: Investigating nslookup capabilities
- Access the manual pages for `nslookup` using the command:
  ```
  man nslookup
  ```
- **Question:** Which keyword would you use to query for the mail server (MX) record within a domain?
  
  **Answer:**
  <!----><!---->

#### Step 3: Using the nslookup command
- Enter `nslookup` to start interactive mode.
  ```
  nslookup
  ```
- Query `cisco.com`:
  ```
  > cisco.com
  ```
- **Question:** What are the IPv4 and IPv6 addresses of the primary DNS server (ns1)?
  
  **Answer:**
  <!----><!---->

- Exit interactive mode:
  ```
  exit
  ```

#### Step 4: Change the server used to perform lookups
- Use a one-line command to query `skillsforall.com` using Google DNS:
  ```
  nslookup skillsforall.com 8.8.8.8
  ```
- Find DNS records with:
  ```
  nslookup
  > server 8.8.8.8
  > set type=any
  > skillsforall.com
  ```

- **Question:** What record types are displayed in the output?
  
  **Answer:**
  <!----><!---->

### Part 2: Use the Whois Function to Obtain Domain Information

#### Step 1: Compare whois output for various organizations
- Use the `whois` command to get information about `cisco.com`:
  ```
  whois cisco.com
  ```
- Now for `skillsforall.com`:
  ```
  whois skillsforall.com
  ```
  
- **Question:** What conclusion can you make about the two domains?
  
  **Answer:**
  <!----><!---->

#### Step 2: Determine IP address registration information
- Record the IP addresses of the Cisco DNS servers from previous `nslookup` output.
- Use `whois` to find IP address ranges:
  ```
  whois 72.163.5.201
  ```

- **Question:** What is the IP address range for Cisco?
  
  **Answer:**
  <!----><!---->

### Part 3: Compare the Output of the Nslookup and Dig Functions

#### Step 1: Use Linux Dig to Query for DNS servers
- Use `dig` to resolve `cisco.com`:
  ```
  dig cisco.com
  ```

- **Question:** What is the difference between the default record types queried by `dig` and `nslookup`?
  
  **Answer:**
  <!----><!---->

#### Step 2: Use Dig to Obtain Additional Information
- Query for DNS servers:
  ```
  dig cisco.com @8.8.8.8 NS
  ```

- Query for `skillsforall.com` with `ANY`:
  ```
  dig skillsforall.com ANY
  ```

- **Question:** Which output is easier to read for obtaining values?
  
  **Answer:**
  <!----><!---->

### Part 4: Perform Reverse DNS Lookups

#### Step 1: Use Dig to Perform rDNS Lookups
- Retrieve the hostname for `ns1.cisco.com`:
  ```
  dig -x 72.163.5.201
  ```

- **Question:** What type of record is returned?
  
  **Answer:**
  <!----><!---->

- Query another IP in the same subnet:
  ```
  dig -x 72.163.1.1
  ```

- **Question:** What type of device do you think is assigned this address?
  
  **Answer:**
  <!----><!---->

#### Step 2: Use the Host Utility for rDNS Lookups
- Use the `host` command:
  ```
  host 72.163.10.1
  ```
  
- **Question:** How does the output differ from `dig` or `nslookup`?
  
  **Answer:**
  <!----><!---->

#### Step 3: Use nslookup to Perform rDNS Lookups
- Use `nslookup` for an rDNS query:
  ```
  nslookup 72.163.5.201
  ```

### Reflection
In this lab, you used `nslookup`, `dig`, and `host` to obtain information from DNS zone files. **Question:** Which tool would you use to begin a passive reconnaissance effort against a targeted domain? Why?
  
**Answer:**
<!----><!---->
